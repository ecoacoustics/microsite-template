{{/*
  Inserts a stylesheet into the current page

  @context {href} The location of the stylesheet to apply

  @example: {{ partial "stylesheet.html" (dict "href" "css/main.css") }}
*/}}

{{/*
  Using Sass to import .css files as Hugo doesn't support direct CSS imports
  from assets folder. All files remain CSS.

  TODO: This partial doesn't work with hugo pre-processing inside of a css file
*/}}
{{ $css := resources.Get .href }}
{{- $css = $css | resources.ExecuteAsTemplate .href . | css.Sass }}

{{- with  $css }}
  {{- if eq hugo.Environment "development" }}
    <link rel="stylesheet" href="{{ .RelPermalink }}">
  {{- else }}
    {{- with . | minify | fingerprint }}
      <link rel="stylesheet" href="{{ .RelPermalink }}" integrity="{{ .Data.Integrity }}" crossorigin="anonymous">
    {{- end }}
  {{- end }}
{{- end }}
